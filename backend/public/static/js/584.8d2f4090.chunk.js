"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[584],{584:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var a=t(43),r=t(662),n=t(729),o=t(862),i=t(579);const l=()=>{const[e,s]=(0,a.useState)({username:"",password:""}),[t,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),{setAuth:m}=(0,a.useContext)(n.c),p=(0,r.Zp)(),g=e=>{const{name:t,value:a}=e.target;s((e=>({...e,[t]:a})))};return(0,i.jsxs)("div",{className:"auth-container "+(c?"loading":""),children:[(0,i.jsx)("h2",{children:d?"Register":"Login"}),t&&(0,i.jsx)("div",{className:"error",children:t}),(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),l(""),u(!0);try{const t=d?"/api/auth/register":"/api/auth/login";if(d)await o.A.post(t,e),h(!1),l("Registration successful! Please login."),s({username:"",password:""});else{const s=await o.A.post(t,e);localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),m({token:s.data.token,user:s.data.user,isAuthenticated:!0}),p("/tasks")}}catch(n){var a,r;l((null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Something went wrong")}finally{u(!1)}},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Username"}),(0,i.jsx)("input",{type:"text",name:"username",value:e.username,onChange:g,required:!0,disabled:c})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Password"}),(0,i.jsx)("input",{type:"password",name:"password",value:e.password,onChange:g,required:!0,disabled:c})]}),(0,i.jsx)("button",{type:"submit",className:"btn-primary",disabled:c,children:c?(0,i.jsx)("div",{className:"spinner"}):d?"Register":"Login"})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("p",{className:"mt-4",children:[d?"Already have an account?":"Don't have an account?"," ",(0,i.jsx)(r.N_,{to:"#",className:"text-blue-500 underline cursor-pointer",onClick:e=>{e.preventDefault(),h(!d)},children:d?"Login":"Register"})]})]})}},862:(e,s,t)=>{t.d(s,{A:()=>r});const a=t(213).A.create({baseURL:"http://localhost:5000"});a.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),(e=>Promise.reject(e)));const r=a}}]);
//# sourceMappingURL=584.8d2f4090.chunk.js.map