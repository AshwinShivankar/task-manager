"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[584],{584:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var t=a(43),r=a(662),n=a(729),o=a(862),i=a(579);const l=()=>{const[e,s]=(0,t.useState)({username:"",password:""}),[a,l]=(0,t.useState)(""),[u,c]=(0,t.useState)(!1),[d,p]=(0,t.useState)(!1),{setAuth:h}=(0,t.useContext)(n.c),m=(0,r.Zp)(),g=e=>{const{name:a,value:t}=e.target;s((e=>({...e,[a]:t})))};return(0,i.jsxs)("div",{className:"auth-container "+(u?"loading":""),children:[(0,i.jsx)("h2",{children:d?"Register":"Login"}),a&&(0,i.jsx)("div",{className:"error",children:a}),(0,i.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),l(""),c(!0);try{const a=d?"/api/auth/register":"/api/auth/login";if(d)await o.A.post(a,e),p(!1),l("Registration successful! Please login."),s({username:"",password:""});else{const s=await o.A.post(a,e);localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),h({token:s.data.token,user:s.data.user,isAuthenticated:!0}),m("/tasks")}}catch(n){var t,r;l((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Something went wrong")}finally{c(!1)}},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Username"}),(0,i.jsx)("input",{type:"text",name:"username",value:e.username,onChange:g,required:!0,disabled:u})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Password"}),(0,i.jsx)("input",{type:"password",name:"password",value:e.password,onChange:g,required:!0,disabled:u})]}),(0,i.jsx)("button",{type:"submit",className:"btn-primary",disabled:u,children:u?(0,i.jsx)("div",{className:"spinner"}):d?"Register":"Login"})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("p",{className:"mt-4",children:[d?"Already have an account?":"Don't have an account?"," ",(0,i.jsx)(r.N_,{to:"#",className:"text-blue-500 underline cursor-pointer",onClick:e=>{e.preventDefault(),p(!d)},children:d?"Login":"Register"})]})]})}},862:(e,s,a)=>{a.d(s,{A:()=>r});const t=a(213).A.create({baseURL:"https://task-manager-production-1bb3.up.railway.app"});t.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),(e=>Promise.reject(e)));const r=t}}]);
//# sourceMappingURL=584.197e3cbd.chunk.js.map