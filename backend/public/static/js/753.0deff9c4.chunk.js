"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[753],{753:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(43),l=t(729),o=t(862),d=t(579);const n=e=>{let{task:s,onToggleComplete:t,onDelete:a,onOpenModal:l}=e;return(0,d.jsxs)("div",{className:"task-row "+(s.completed?"completed":""),onClick:()=>l(s),children:[(0,d.jsx)("div",{className:"task-name-cell",children:s.title}),(0,d.jsx)("div",{className:"task-status-cell",children:(0,d.jsx)("span",{className:"status-badge "+(s.completed?"status-completed":"status-pending"),children:s.completed?"Completed":"Pending"})}),(0,d.jsx)("div",{className:"task-actions-cell",children:(0,d.jsx)("button",{className:"delete-btn",onClick:e=>{e.stopPropagation(),a(s.id)},children:"Delete"})})]})},c=e=>{let{onAddTask:s}=e;const[t,l]=(0,a.useState)({title:"",description:""}),o=e=>{const{name:s,value:t}=e.target;l((e=>({...e,[s]:t})))};return(0,d.jsxs)("div",{className:"task-form",children:[(0,d.jsx)("h3",{children:"Add New Task"}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.title.trim()&&(s(t),l({title:"",description:""}))},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Title"}),(0,d.jsx)("input",{type:"text",name:"title",value:t.title,onChange:o,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Description (optional)"}),(0,d.jsx)("textarea",{name:"description",value:t.description,onChange:o})]}),(0,d.jsx)("button",{type:"submit",className:"btn-primary",children:"Add Task"})]})]})},i=e=>{let{task:s,onClose:t,onToggleComplete:a,onDelete:l}=e;return(0,d.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h2",{children:s.title}),(0,d.jsx)("button",{className:"close-btn",onClick:t,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"modal-body",children:[(0,d.jsx)("h3",{children:"Description:"}),(0,d.jsx)("p",{className:"task-description",children:s.description?s.description:"No description provided."}),(0,d.jsxs)("div",{className:"task-metadata",children:[(0,d.jsxs)("p",{children:["Created: ",new Date(s.createdAt).toLocaleString()]}),s.updatedAt&&(0,d.jsxs)("p",{children:["Last Updated: ",new Date(s.updatedAt).toLocaleString()]})]})]}),(0,d.jsxs)("div",{className:"modal-footer",children:[(0,d.jsx)("button",{className:"complete-btn "+(s.completed?"incomplete-btn":""),onClick:()=>{a(s.id,!s.completed),t()},children:s.completed?"Mark as Incomplete":"Mark as Complete"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>l(s.id),children:"Delete"})]})]})})};var r=t(115);const m=()=>{const[e,s]=(0,a.useState)([]),[t,m]=(0,a.useState)(!0),[p,u]=(0,a.useState)(""),[h,k]=(0,a.useState)(null),[x,j]=(0,a.useState)(!1),{auth:v,logout:N}=(0,a.useContext)(l.c);(0,a.useEffect)((()=>{g()}),[]);const g=async()=>{try{m(!0);const e=await o.A.get("/api/tasks");s(e.data),u("")}catch(t){var e;401===(null===(e=t.response)||void 0===e?void 0:e.status)?N():u("Failed to fetch tasks")}finally{m(!1)}},b=async(e,t)=>{try{const a=await o.A.put(`/api/tasks/${e}`,{completed:t});s((s=>s.map((s=>s.id===e?a.data:s)))),r.oR.success("Task marked as "+(t?"completed":"incomplete"))}catch(l){var a;401===(null===(a=l.response)||void 0===a?void 0:a.status)?N():(u("Failed to update task"),r.oR.error("Failed to update task"))}},C=async e=>{try{await o.A.delete(`/api/tasks/${e}`),s((s=>s.filter((s=>s.id!==e)))),r.oR.success("Task deleted successfully!"),j(!1)}catch(a){var t;401===(null===(t=a.response)||void 0===t?void 0:t.status)?N():(u("Failed to delete task"),r.oR.error("Failed to delete task"))}},y=e=>{k(e),j(!0)};return t?(0,d.jsx)("div",{className:"loading",children:"Loading tasks..."}):(0,d.jsxs)("div",{className:"task-list-container",children:[(0,d.jsx)("h2",{children:"Your Tasks"}),p&&(0,d.jsx)("div",{className:"error",children:p}),(0,d.jsx)(c,{onAddTask:async e=>{try{const t=await o.A.post("/api/tasks",e);s((e=>[...e,t.data])),r.oR.success("Task added successfully!")}catch(a){var t;401===(null===(t=a.response)||void 0===t?void 0:t.status)?N():(u("Failed to add task"),r.oR.error("Failed to add task"))}}}),(0,d.jsxs)("div",{className:"task-table",children:[(0,d.jsxs)("div",{className:"task-table-header",children:[(0,d.jsx)("div",{className:"task-name-column",children:"Task"}),(0,d.jsx)("div",{className:"task-status-column",children:"Status"}),(0,d.jsx)("div",{className:"task-actions-column",children:"Actions"})]}),0===e.length?(0,d.jsx)("div",{className:"no-tasks",children:"No tasks yet. Add a new task to get started!"}):(0,d.jsx)("div",{className:"task-table-body",children:e.map((e=>(0,d.jsx)(n,{task:e,onToggleComplete:b,onDelete:C,onOpenModal:y},e.id)))})]}),x&&h&&(0,d.jsx)(i,{task:h,onClose:()=>{j(!1),k(null)},onToggleComplete:b,onDelete:C})]})}},862:(e,s,t)=>{t.d(s,{A:()=>l});const a=t(213).A.create({baseURL:"https://task-manager-production-1bb3.up.railway.app"});a.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),(e=>Promise.reject(e)));const l=a}}]);
//# sourceMappingURL=753.0deff9c4.chunk.js.map